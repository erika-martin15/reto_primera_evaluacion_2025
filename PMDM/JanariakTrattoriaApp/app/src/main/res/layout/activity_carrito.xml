<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/fondo_claro">

    <!-- Cabecera del carrito, que tendrá un color de fondo rojo.-->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/rojo"
        android:orientation="horizontal"
        android:paddingTop="16dp"
        android:paddingBottom="16dp"
        android:elevation="4dp"
        android:gravity="center_vertical"
        android:paddingStart="8dp"
        android:paddingEnd="16dp">

        <!-- Botón de "volver" -->
        <ImageButton
            android:id="@+id/buttonVolverMain"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:src="@drawable/flecha_atras"
            android:background="?attr/selectableItemBackgroundBorderless"
            android:contentDescription="@string/boton_volver"
            app:tint="@color/texto_blanco" />

        <!-- Título del carrito.-->
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/titulo_carrito"
            android:textSize="28sp"
            android:textStyle="bold"
            android:textColor="@color/texto_blanco"
            android:gravity="center"
            android:fontFamily="sans-serif-medium"
            android:layout_marginEnd="48dp" />
    </LinearLayout>

    <!-- Este es el primer apartado que es realmente exclusivo al carrito. Este LinearLayout solo se mostrará si NO HAY productos en el carrito.
     En el momento en el que exista alguno, este será ignorado y pasado de largo. Para que no sea visible, está puesto el atributo "android:visibility="gone".-->
    <LinearLayout
        android:id="@+id/layoutCarritoVacio"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="vertical"
        android:gravity="center"
        android:padding="32dp"
        android:visibility="gone">
        <!-- En este caso, se ignorará la altura del elemento, y símplemente ocupará todo el espacio vertical que tenga disponible en ese momento. -->
           <TextView
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:text="@string/ver_carrito"
               android:textSize="80sp"
               android:layout_marginBottom="16dp" />
           <!-- Mostraremos un carrito vacío (está puesto como un String, para que sea grande símplemente aumentaremos el tamaño del texto). -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/carrito_vacio"
            android:textSize="20sp"
            android:textColor="@color/texto_secundario"
            android:fontFamily="sans-serif-light" />
        <!-- También añadiremos un texto que acompañe al emoticono. -->
    </LinearLayout>

    <!-- Utilizaremos un ReciclerView para mostrar la lista de productos que se encuentren en el carrito -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewCarrito"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:padding="12dp"
        android:clipToPadding="false" />

    <!-- Hemos decidido también introducir otro concepto nuevo: Los CardView. Estos son contenedores que permiten ordenar de manera sencilla
    y visual los productos individuales. Estos contenedores también forman parte de la familia de Material Design (las guías de diseño de Google)
    y son una buena forma de organizar los datos.

    En el carrito, van a contener la información del número total de productos, de su total en cuanto a precio se refiere y a los botones de
    "vaciar el carrito" y "finalizar el pedido".-->
    <androidx.cardview.widget.CardView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:cardCornerRadius="0dp"
        app:cardElevation="8dp"
        app:cardBackgroundColor="@color/blanco">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="20dp">

            <!-- TextView con la cantidad total de productos que hay en el carrito -->
            <TextView
                android:id="@+id/textViewTotalProductos"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/total_productos"
                android:textSize="16sp"
                android:textColor="@color/texto_secundario"
                android:fontFamily="sans-serif" />

            <!-- TextView que muestra el precio total de los productos -->
            <TextView
                android:id="@+id/textViewTotalPrecio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/precio_total"
                android:textSize="32sp"
                android:textStyle="bold"
                android:textColor="@color/rojo"
                android:layout_marginTop="4dp"
                android:fontFamily="sans-serif-medium" />

            <!-- Preguntándonos cómo mejorar el estilo de nuestra aplicación, decidimos separar los totales de los botones. Para ello creamos una línea
             divisoria que ocupará todo el ancho y no tendrá apenas altura.-->
            <View
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:background="@color/divisor"
                android:layout_marginTop="16dp"
                android:layout_marginBottom="16dp" />

            <!-- Creamos un contenedor que contendrá los dos botones que necesitamos. Aquí encontramos un nuevo atributo, "android:weightSum"2". Lo que hará será dividir
             el espacio del Layout de manera igual en dos partes.

             Como teníamos claro que este apartado tendría dos divisiones y hacerlo de manera manual se estaba complicando, encontramos una manera más eficiente de hacerlo.-->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:weightSum="2">

                <!-- Creamos el botón de "vaciar" el carrito (borrar todos sus productos). -->
                <Button
                    android:id="@+id/botonVaciarCarrito"
                    style="@style/Widget.MaterialComponents.Button.OutlinedButton"
                    android:layout_width="0dp"
                    android:layout_height="56dp"
                    android:layout_weight="1"
                    android:text="@string/boton_vaciar_carrito"
                    android:textSize="14sp"
                    android:textColor="@color/texto_secundario"
                    app:strokeColor="@color/texto_secundario"
                    app:cornerRadius="12dp"
                    android:layout_marginEnd="8dp" />

                <!-- Creamos otro botón para "finalizar" el pedido. Como no estamos conectados a ninguna base de datos, este botón no tendrá funcionalidad real. -->
                <Button
                    android:id="@+id/botonFinalizarPedido"
                    android:layout_width="0dp"
                    android:layout_height="56dp"
                    android:layout_weight="1"
                    android:text="@string/boton_finalizar_pedido"
                    android:textSize="14sp"
                    android:textStyle="bold"
                    android:textColor="@color/texto_blanco"
                    android:backgroundTint="@color/verde"
                    app:cornerRadius="12dp"
                    android:layout_marginStart="8dp" />
            </LinearLayout>
        </LinearLayout>
    </androidx.cardview.widget.CardView>
</LinearLayout>